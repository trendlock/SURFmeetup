<!DOCTYPE html>
<html>
  <head>
    <title>Turning Turnbull and Shorten into data</title>
    <meta charset="utf-8">
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Turning Turnbull and Shorten into data
## Aidan Morrison &amp; Ross Ireland
### April 2018

---





![](images/shorten_media.png)


---

![](images/turnbull_media.png)


---

class:  middle

# Motivation
### - Accessing and cleaning data in the real world
### - Wholistic, public, potential interest, SEARCHABLE, find events
### - Endless analysis possible, just a start, eg "Driving Debate" or "Sentiment"

---

class: middle

# Source

### - Inspecting media pages (transcipts, media releases and opinion pieces)
### - Engineering a method to systimaticall crawl the site
### - Understanding the typical layout of a media page

---
class: middle

# Scrape

### - rvest (web scraping html pages)
### - cloudyr (a project full of clients to cloud computing services)
- awspack
- aws.s3
- googleCloudStorageR


.footnote[
github.com/hadley/rvest

github.com/cloudyr
]

---
class: middle



```r
library(rvest)

h &lt;- read_html("http://www.billshorten.com.au/transcripts")
```





Extracting anchors/links on the page:

```r
anchors &lt;- html_nodes(h, "a")
```

`&lt;a href=\"/transcript_doorstop_canberra_monday_27_november_2017\"&gt;
TRANSCRIPT - DOORSTOP - CANBERRA - MONDAY, 27 NOVEMBER 2017 &lt;/a&gt;`

---
class: middle

Separate the text and the `href`:

```r
html_text(anchors)[30:32]
```

```
## [1] "TRANSCRIPT - DOORSTOP - CANBERRA - MONDAY, 27 NOVEMBER 2017 "
## [2] "TRANSCRIPT - DOORSTOP - SYDNEY - FRIDAY, 24 NOVEMBER 2017 "  
## [3] "TRANSCRIPT - DOORSTOP - SYDNEY - THURSDAY, 23 NOVEMBER 2017 "
```

```r
html_attr(anchors, "href")[30:32]
```

```
## [1] "/transcript_doorstop_canberra_monday_27_november_2017"
## [2] "/transcript_doorstop_sydney_friday_24_november_2017"  
## [3] "/transcript_doorstop_sydney_thursday_23_november_2017"
```
---
class: middle

# Processing/Cleaning

```html
div class="headline"&gt;
  &lt;h2&gt;TRANSCRIPT - DOORSTOP - MELBOURNE - FRIDAY, 26 JANUARY 2018&lt;/h2&gt;
&lt;/div&gt;

&lt;div id="content"&gt;

  &lt;div id="intro" class="intro"&gt;
    &lt;div class="content"&gt;
      &lt;p&gt;&lt;strong&gt;E&amp;amp;OE TRANSCRIPT&lt;br&gt;&lt;/strong&gt;&lt;strong&gt;DOORSTOP&lt;br&gt;&lt;/strong&gt;&lt;strong&gt;MELBOURNE&lt;br&gt;&lt;/strong&gt;&lt;strong&gt;FRIDAY, 26 JANUARY 2018&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SUBJECT/S: &lt;em&gt;Australian of the Year, trade, Australia Day, republic, cost of living. &lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;BILL SHORTEN, LEADER OF THE OPPOSITION:&lt;/strong&gt; Good morning everybody. I’m fortunate to be in the western Suburbs of Melbourne, welcoming 150 new Australian citizens.&lt;/p&gt;
&lt;p&gt;I’d like to congratulate Australian of the Year, Michelle Simmons. Her win is a win for her and her personal hard work, but it’s also a win for science, and it’s &lt;/p&gt;
&lt;p&gt;Happy to take any questions that people might have.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JOURNALIST:&lt;/strong&gt; Is there any hope now that the US can re-join the TPP deal?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SHORTEN:&lt;/strong&gt; I think first of all we need to see if this new trade agreement stacks up. Let me be very clear, this is not the old Trans Pacific Partnership which included the United States. I was right when I said that Donald Trump had walked away from that, and he hasn’t come back. But this new arrangement, whilst it’s much &lt;/p&gt;
&lt;p&gt;If it stacks up, Labor will give it the tick, if it doesn’t stack up then we’re not going to give it the tick. What we need to do is always watch out for the interests of working and middle-class Aussies, &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JOURNALIST:&lt;/strong&gt; Just back on Australia Day, we’ve already seen a few far right rallyists go to citizenship ceremonies and they’ll be holding an event in St Kilda today, what do you have to say to those people?&lt;/p&gt;
```

---

#### Aidans ratio method
#### boilerpipeR

.footnote[github.com/mannau/boilerpipeR]
---

## Comparing methods


---

## Using Natural Language Processing (NLP)

- Named Entity Recognition (NER)
- people, places, organisations, currency, dates, times

---

## tidytext

- Tokenize a string
- Splitting a speech into sentences, phrases and words

.footnote[github.com/juliasilge/tidytext]
---

## Sentiment Analysis

- RSentiment and tidytext
- 

.footnote[
cran.r-project.org/package=RSentiment

github.com/juliasilge/tidytext
]
---
class: middle


# A useable data set!

### - Features
### - Scope
### - Coverage/Quality

---
class: middle

# Visualisation and Exloration Tools

### - shiny (simple interactive web apps) 
### - plotly (interactive visualisatons) 
### - leaflet (interactive maps)

.footnote[
github.com/rstudio/shiny

github.com/ropensci/plotly

github.com/rstudio/leaflet
]
---

class: middle

# Analysis

### - Who drives debate?
### - Rural v Urban Language
### - Sentiment
### - Favouraite Phrases

---
    </textarea>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
